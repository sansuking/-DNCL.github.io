<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <link rel="stylesheet" type="text/css" href="index.css"/>
        <link rel="icon" href="../pypen.ico"/>
        <title>PyPENの文法</title>
    </head>
    <body>
        <div id="whole">
        <h1>PyPENの文法</h1>
        <p><a href="index.html">戻る</a></p>
        <h2>値</h2>
        <div class="part">
        <p>数は整数と実数が区別される。小数部分を含まない数は整数とする。例：3.0は実数</p>
        <p>文字列は""または''または「」で囲む（""中の"は\"，''中の'は\'と表記する）。</p>
        <p>真偽値はTrueとFalseのどちらかである。</p>
        <p>[1,2,3]のような配列も使える。</p>
        <p>{"x":3, "y":4}のような辞書も使える。</p>
        </div>
        <h2>変数</h2>
        <div class="part">
        <p>変数を宣言することはできない。値を代入した時点で変数は生成される。
        </p>
        <p class="part">変数名の後に番号や文字列をいれた[ ]をつけて配列や辞書を使うことができる。
            二次元以上の配列の要素はa[1,2]またはa[1][2]などのように使う。
        </p>
        </div>
        <h2>計算</h2>
        <h3>計算の演算子</h3>
        <div class="part"
        <p>
        +,-,*,/,//,%,**が使える。*は掛け算，/と//は割り算，%は割り算の余り（整数どうしに限る）を表す。
        ただし/の割り算は余りを出さない割り算（結果は実数）で，//の割り算は商の整数部分（結果は整数）を表す。
        また，**はべき乗を表す。
        </p>
        <p class="part">
            ビット演算は&,|,^,~,&lt;&lt;,&gt;&gt;が使える。
        </p>
        <p class="part">
            「《整数》個の《値》」で配列をつくることもできる。<br>
            例：a=10個の0
        </p>
        </div>
        <h3>条件式</h3>
        <p class="part">2つの値を==,≠,!=,&gt;,&lt;,≧,&gt;=,≦,&lt;=で比べることができる。
        !=は≠，&gt;=は≧，&lt;=は≦とそれぞれ同じである。
        条件式を"and"，"or"でつないだり，"not"を前置することで否定することができる。
        "not"，"and"，"or"の順に優先的に結合され，同じものどうしは左から順に評価される。
        3つ以上の値を比べる場合は，たとえばa&lt;b&lt;cをa&lt;b and b&lt;cのように評価する。</p>
        <p class="part">配列の中にある値が含まれるかどうかを"《配列》の中に《値》"で調べることができる。</p>
        <h3>文字列結合</h3>
        <p class="part">"と"で文字列を結合することができる。数値は文字列に変換してから結合される。
            例："こん"と"にちは"→"こんにちは"。1と2→12</p>
        <h3>関数</h3>
        <div class="part">
        <p>次のような関数を使うことができる。文字列の位置や番号は0から始まる。</p>
        <table class="def_table">
            <tr><th>関数</th><th>意味</th><th>使用例</th></tr>
            <tr><td>abs(《値》)</td><td>絶対値</td><td>abs(-3)→3</td></tr>
            <tr><td>random()</td><td>乱数</td><td>random()→0以上1未満の乱数（実数）</td></tr>
            <tr><td>random(《整数》)</td><td>乱数</td><td>random(5)→0以上5以下の乱数（整数）</td></tr>
            <tr><td>ceil(《実数》)</td><td>小数部分切り上げ</td><td>ceil(3.5)→4</td></tr>
            <tr><td>floor(《実数》)</td><td>小数部分切り捨て</td><td>floor(3.5)→3</td></tr>
            <tr><td>round(《実数》)</td><td>小数部分四捨五入</td><td>round(3.5)→4</td></tr>
            <tr><td>sin(《実数》)</td><td>三角関数のサイン（単位はラジアン）</td><td>sin(0)→0</td></tr>
            <tr><td>cos(《実数》)</td><td>三角関数のコサイン（単位はラジアン）</td><td>cos(0)→1</td></tr>
            <tr><td>tan(《実数》)</td><td>三角関数のタンジェント（単位はラジアン）</td><td>tan(0)→0</td></tr>
            <tr><td>asin(《実数》)</td><td>逆三角関数のアークサイン（単位はラジアン）</td><td>asin(1)→1.5707963267948966</td></tr>
            <tr><td>acos(《実数》)</td><td>逆三角関数のアークコサイン（単位はラジアン）</td><td>acos(0)→1.5707963267948966</td></tr>
            <tr><td>atan(《実数》)</td><td>逆三角関数のアークタンジェント（単位はラジアン）</td><td>atan(1)→0.7853981633974483</td></tr>
            <tr><td>atan2(《実数》,《実数》)</td><td>逆三角関数のアークタンジェント（単位はラジアン）</td><td>atan(1,0)→1.5707963267948966</td></tr>
            <tr><td>sqrt(《実数》)</td><td>ルート</td><td>sqrt(2)→1.414…</td></tr>
            <tr><td>log(《実数》)</td><td>自然対数</td><td>log(10)→2.302…</td></tr>
            <tr><td>exp(《実数》)</td><td>指数関数（底は自然対数の底）</td><td>exp(1)→2.718…</td></tr>
            <tr><td>pow(《実数》,《実数》)</td><td>累乗</td><td>pow(2,3)→8</td></tr>
            <tr><td>length(《文字列》)</td><td>文字列の長さ（文字数）</td><td>length("こんにちは")→5</td></tr>
            <tr><td>length(《配列》)</td><td>配列の長さ</td><td>length([1,2,3,4,5])→5</td></tr>
            <tr><td>append(《文字列》,《文字列》)</td><td>文字列結合</td><td>append("Wa","PEN")→"WaPEN"</td></tr>
            <tr><td>substring(《文字列》,《開始位置》)</td><td>部分文字列（最後まで）</td><td>substring("こんにちは",2)→"にちは"</td></tr>
            <tr><td>substring(《文字列》,《開始位置》,《長さ》)</td><td>部分文字列（長さ指定）</td><td>substring("こんにちは",2,1)→"に"</td></tr>
            <tr><td>split(《文字列》)</td><td>文字列分割</td><td>split("abcd")→["a","b,"c","d"]（配列）</td></tr>
            <tr><td>split(《文字列》,《区切文字列》)</td><td>文字列分割</td><td>split("a:b:c:d",":")→["a","b,"c","d"]（配列）</td></tr>
            <tr><td>extract(《文字列》,《区切文字列》,《番号》)</td><td>文字列分割（番号指定）</td><td>extract("a:b:c:d",":",2)→"c"</td></tr>
            <tr><td>insert(《文字列》,《位置》,《文字列》)</td><td>文字列挿入</td><td>insert("こんは",2,"にち")→"こんにちは"</td></tr>
            <tr><td>replace(《文字列》,《位置》,《長さ》,《文字列》)</td><td>文字列置換</td><td>replace("こんにちは",2,2,"ばん")→"こんばんは"</td></tr>
            <tr><td>整数(《値》)</td><td>整数への変換</td><td>整数(3.5)→3，整数("3.14")→3</td></tr>
            <tr><td>実数(《値》)</td><td>実数への変換</td><td>実数(3)→3.0，実数("3.14")→3.14</td></tr>
            <tr><td>文字列(《値》)</td><td>文字列への変換</td><td>文字列(3.5)→"3.5"，文字列(1=1)→"true"</td></tr>
            <tr><td>真偽(《値》)</td><td>真偽への変換</td><td>真偽(0)→false，整数(1)→true</td></tr>
        </table>
        </div>
        <h2>代入</h2>
        <div class="part">
        <pre class="code">
《変数》=《値》
        </pre>
        <p class="flowchart">
            <img src="flowsubstitute.png" alt="代入">
        </p>
        <p>"《配列変数》に《値》を追加する"，"《配列変数》に《配列値》を連結する"という構文も用意されている。</p>
        <pre>
a=[0,1,2,3,4,5]
aに6を追加する
aに[7,8]を連結する
        </pre>
        <p>+=や&=のような複合代入演算子も使える。</p>
        </div>
        <h2>入力</h2>
        <div class="part">
        <pre class="code">
《変数》に整数を入力する
        </pre>
        <p class="flowchart">
            <img src="flowinput.png" alt="代入">
        </p>
        <p>"整数"の部分は"実数""文字列""真偽"にすることもできる。</p>
        </div>
        <h2>出力</h2>
        <div class="part">
        <pre class="code">
表示する(《値》)
《値》を表示する
        </pre>
        <p class="flowchart">
            <img src="flowoutput.png" alt="表示">
        </p>
        <pre class="code">
改行無しで表示する(《値》)
《値》を改行無しで表示する
        </pre>
        <p class="flowchart">
            <img src="flowoutput1.png" alt="表示">
        </p>
        <p class="code">《値》に配列を指定すると，配列の全要素が表示される。値をコンマ区切りで複数指定すると，それらが空白区切りで表示される。</p>
        </div>
        <h2>分岐（選択）</h2>
        <div class="part">
        <div class="code">
        <pre>
もし《条件》ならば：
    《命令》
        </pre>
        <pre>
もし《条件》ならば：
    《命令》
そうでなければ：
    《命令》
        </pre>
        「そうでなくもし」を使うこともできるが，これを使うとフローチャートの表示は行わない。
    <pre>
もし《条件》ならば：
    《命令》
そうでなくもし《条件》ならば：
    《命令》
そうでなければ：
    《命令》
        </pre>
        </div>
        <p class="flowchart">
            <img src="flowif.png" alt="分岐">
        </p>
        </div>
        <h2>ループ</h2>
        <div class="part">
        <h3>〜の間</h3>
        <pre class="code">
《条件》の間：
    《命令》
        </pre>
        <p class="flowchart">
            <img src="flowwhile.png" alt="ループ">
        </p>
        <h3>増やしながら・減らしながら</h3>
        <pre class="code">
《変数》を《値》から《値》まで《値》ずつ増やしながら：
    《命令》
        </pre>
        <p class="flowchart">
            <img src="flowforinc.png" alt="ループ">
        </p>
        <pre class="code">
《変数》を《値》から《値》まで《値》ずつ減らしながら：
    《命令》
        </pre>
        <p class="flowchart">
            <img src="flowfordec.png" alt="ループ">
        </p>
        <h3>配列の要素を取り出しながら</h3>
        <pre class="code">
《配列》の要素《変数》について繰り返す：
    《命令》
        </pre>
        <p class="flowchart">
            <img src="flowfor.png" alt="ループ">
        </p>
        <p>"繰り返しを抜ける"命令で繰り返しから抜けることができる。</p>
        </div>
        <h2>ファイル操作</h2>
        <div class="part">
        <table class="def_table" id="fileio">
            <tr><th>関数・命令</th><th>意味</th></tr>
            <tr><td>openr(《ファイル名》)</td><td>ファイルを読込用にオープンする。戻り値はファイル番号</td></tr>
            <tr><td>openw(《ファイル名》)</td><td>ファイルを書込用にオープンする。戻り値はファイル番号</td></tr>
            <tr><td>opena(《ファイル名》)</td><td>ファイルを追記用にオープンする。戻り値はファイル番号</td></tr>
            <tr><td>getline(《ファイル番号》)</td><td>ファイルから1行読み込む。戻り値は文字列（改行含む）</td></tr>
            <tr><td>getchar(《ファイル番号》)</td><td>ファイルから1文字読み込む。戻り値は文字列</td></tr>
            <tr><td>putline(《ファイル番号》,《文字列》)</td><td>ファイルに文字列と改行を書き込む</td></tr>
            <tr><td>putstr(《ファイル番号》,《文字列》)</td><td>ファイルに文字列と改行を書き込む</td></tr>
            <tr><td>close(《ファイル番号》)</td><td>ファイルをクローズする</td></tr>
        </table>
        <p>書込・追記用ファイルはクローズしないと保存しないことに注意。</p>
        </div>
        <h2>グラフィック関係などの命令</h2>
        <div class="part">
        <table class="def_table" id="function">
            <tr><th>命令</th><th>英語表記</th><th>補足</th></tr>
            <tr><td>描画領域開く(《幅》,《高さ》)</td><td>gOpenWindow</td><td>1つしか開けない</td></tr>
            <tr><td>描画領域閉じる()</td><td>gCloseWindow</td><td></td></tr>
            <tr><td>描画領域全消去()</td><td>gClearWindow</td><td></td></tr>
            <tr><td>線色設定(《赤》,《緑》,《青》)</td><td>gSetLineColor</td><td>各色の数は0〜255</td></tr>
            <tr><td>塗色設定(《赤》,《緑》,《青》)</td><td>gSetFillColor</td><td></td></tr>
            <tr><td>文字色設定(《赤》,《緑》,《青》)</td><td>gSetTextColor</td><td></td></tr>
            <tr><td>線太さ設定(《太さ》)</td><td>gSetLineWidth</td><td></td></tr>
            <tr><td>文字サイズ設定(《サイズ》)</td><td>gSetTextSize</td><td></td></tr>
            <tr><td>文字描画(《文字列》,《x》,《y》)</td><td>gDrawText</td><td>(x,y)は文字列の左下の座標</td></tr>
            <tr><td>点描画(《x》,《y》)</td><td>gDrawPoint</td><td></td></tr>
            <tr><td>線描画(《x1》,《y1》,《x2》,《y2》)</td><td>gDrawLine</td><td></td></tr>
            <tr><td>矩形描画(《x》,《y》,《幅》,《高さ》)</td><td>gDrawBox</td><td>(x,y)は矩形の左上の座標</td></tr>
            <tr><td>矩形塗描画(《x》,《y》,《幅》,《高さ》)</td><td>gFillBox</td><td></td></tr>
            <tr><td>円描画(《x》,《y》,《半径》)</td><td>gDrawCircle</td><td>(x,y)は中心の座標</td></tr>
            <tr><td>円塗描画(《x》,《y》,《半径》)</td><td>gFillCircle</td><td></td></tr>
            <tr><td>楕円描画(《x》,《y》,《幅》,《高さ》)</td><td>gDrawOval</td><td>(x,y)は楕円に外接する長方形の左上の座標</td></tr>
            <tr><td>楕円塗描画(《x》,《y》,《幅》,《高さ》)</td><td>gFillOval</td><td></td></tr>
            <tr><td>弧描画(《x》,《y》,《幅》,《高さ》,《開始角》,《終了角》,《閉じ方》)</td><td>gDrawArc</td><td>(x,y)は楕円に外接する長方形の左上の座標<br>角度の単位は度<br>閉じ方は0:閉じない，1:弦，2:半径</td></tr>
            <tr><td>弧塗描画(《x》,《y》,《幅》,《高さ》,《開始角》,《終了角》,《閉じ方》)</td><td>gFillArc</td><td></td></tr>
            <tr><td>棒グラフ描画(《幅》,《高さ》,《値の配列》)</td><td>gBarplot</td><td>棒グラフ描画(100,100,[30,10,20])→<img src="barplot.png" alt="棒グラフ"></td></tr>
            <tr><td>線グラフ描画(《幅》,《高さ》,《値の配列》)</td><td>gLineplot</td><td>線グラフ描画(100,100,[[30,10,20],[10,30,20]])→<img src="lineplot.png" alt="棒グラフ"></td></tr>
            <tr><td>グラフ描画(《レイアウト情報》,《値の配列》)</td><td>gDrawGraph</td><td>使い方が難しいので<a href="graph.html">別マニュアル</a>で説明する</td></tr>
            <tr><td>グラフ消去()</td><td>gClearGraph</td><td>gDrawGraphで表示したグラフを消去する</td></tr>
            <tr><td>《ミリ秒数》 ミリ秒待つ</td><td></td><td>（今はタイミングがおかしい）</td></tr>
            <tr><td>変数を確認する</td><td></td><td>全変数を表示する</td></tr>
            <tr><td>何もしない</td><td></td><td>何もしない</td></tr>
        </table>
        <p>棒グラフ描画，線グラフ描画の《値の配列》は《値の配列の配列》でも良い。</p>
        </div>
    <h2>関数・手続きの定義</h2>
    <div class="part">
    <p>注意：関数や手続きを定義したプログラムについては，フローチャートの実装がまだできていない。
        この状態で間違ってフローチャートを変更するとプログラムがごそっと消えてしまうので，
        関数や手続きを定義するプログラムではフローチャートの表示をしないことをお勧めします。
    </p>
    <pre>
関数 hoge(x)：
     …
    《値》を返す
    </pre>
    <pre>
手続き hoge(x)：
    …
    手続きを抜ける
    …
    </pre>
    <p>関数は値を返さないとエラーになる。手続きは値を返すことができない。
        関数・手続きともに，引数を取らない場合であってもカッコが必要（定義するときも呼び出すときも）。</p>
    </div>
    <p>Python風のインデントが合ってないとエラーになります。インデントする前の行末は"："が必要です。</p>
    </div>
    </body>
</html>
